<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lambda Notes</title>
  <link rel="shortcut icon" href="https://s3-eu-west-1.amazonaws.com/dwyl/favicon.ico">
  <!-- CSS Styles are 100% Optional! -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.2.2/css/flat-ui.min.css">
  <style>body { margin-left: 2em;} #save { float: right;}</style>
</head>
<body>
  <h1>Notes</h1>

  <textarea id="notes" name="textarea" rows="10" cols="60" placeholder="Make your notes here"></textarea>
  <br/>
  <button id="save" class="btn btn-block btn-lg btn-success">Save</button>

<!-- Litterally *Everyone* Knows jQuery ... see: http://trends.builtwith.com/javascript/jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
  var API_KEY = 'x1TMsafJaB4z4mWpmhjck8XtU1yrryAy9aolqpvU';

  $(document).ready(function() {

    function getNotes () {

      $.ajax({
        type: "GET",
        // headers: { 'x-api-key' : API_KEY },
        url: "https://r09u5uw11g.execute-api.eu-west-1.amazonaws.com/prod/GetNotes",
        dataType: "json",
        success: function(res, status, xhr) {
          console.log(' - - - - - - - - getNotes res:')
          console.log(res);
          // $('#notes').val(res.notes);
        },
        error: function(xhr, err) {
          console.log(' - - - - - - - - xhr:')
          console.log(xhr);
          console.log(' - - - - - - - - error:')
          console.log(err);
        }
      });
    }

    getNotes();

    function postNotes () {

      $.ajax({
        type: "POST",
        headers: { 'x-api-key' : API_KEY },
        url: "https://mhaggkho54.execute-api.eu-west-1.amazonaws.com/prod/",
        data: {"notes" : $('#notes').val() },
        dataType: "json",
        success: function(res, status, xhr) {
          console.log(' - - - - - - - - getNotes res:')
          console.log(res);

        },
        error: function(xhr, err) {
          console.log(xhr);
          console.log(err);
        }
      });
    }

    $( "#save" ).click(function() {
      console.log('Save Button Clicked!');
      postNotes();
    });


  });
</script>

</body>
</html>
